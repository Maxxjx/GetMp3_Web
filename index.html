<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <script src="{{ url_for('static', filename='index.js') }}"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>GetMp3</title>
  </head>
  <body>
    <section class="container mx-auto p-6">
      <div class="content mx-auto max-w-4xl blured p-8 rounded-lg shadow-lg">
        <div class="intro mb-6">
          <p>
            Welcome to GetMp3, your one-stop destination for extracting audio from
            your favorite video files quickly and easily.
            <span class="block mt-2 text-700">
              With our user-friendly interface, you can convert any video to audio in just a few clicks.
              Say goodbye to complex software and hello to hassle-free audio
              extraction with GetMp3.
            </span>
          </p>
        </div>
        <div class="drop-box mb-6">
            <div id="drop_zone" class="drop-area border-2 border-dashed border-gray-300 p-6 rounded-lg text-center" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">

            <p class="mb-2">Drag and drop your file</p>
            <p class="mb-4">(or)</p>
            <div>
                <form
                id="myForm"
                method="POST"
                enctype="multipart/form-data"
                action="/upload"
              >
                <input type="file" name="file" id="fileInput" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
              </form>
            </div>
          </div>
        </div>
        <div class="progress-bar mb-6 hidden" id="progressContainer">
            <div class="w-full bg-gray-200 rounded-full h-4">
              <div id="progressBar" class="bg-blue-500 h-4 rounded-full" style="width: 0%;"></div>
            </div>
            <div class="text-center mt-2">
              <span id="progressText" class="text-sm text-gray-700">0%</span>
            </div>
          </div>
        <div class="download text-center">
          <button
            type="button"
            onclick="submitForm()"
            class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600"
          >
            Download
          </button>
        </div>
        <div class="links mt-6 text-center">
          <!-- Add any additional links or information here -->
        </div>
      </div>
    </section>
    <script>
        function submitForm() {
          const form = document.getElementById('myForm');
          const formData = new FormData(form);
          const xhr = new XMLHttpRequest();
  
          xhr.open('POST', form.action, true);
  
          xhr.upload.onprogress = function(event) {
            if (event.lengthComputable) {
              const percentComplete = (event.loaded / event.total) * 100;
              document.getElementById('progressBar').style.width = percentComplete + '%';
              document.getElementById('progressText').innerText = Math.round(percentComplete) + '%';
            }
          };
  
          xhr.onloadstart = function() {
            document.getElementById('progressContainer').classList.remove('hidden');
          };
  
          xhr.onload = function() {
            if (xhr.status === 200) {
              // Handle successful upload
              alert('File uploaded successfully!');
            } else {
              // Handle error
              alert('Error uploading file.');
            }
          };
  
          xhr.send(formData);
        }
  
        function handleDrop(event) {
          event.preventDefault();
          const files = event.dataTransfer.files;
          if (files.length > 0) {
            document.getElementById('fileInput').files = files;
          }
        }
  
        function handleDragOver(event) {
          event.preventDefault();
        }
      </script>
  </body>
</html>